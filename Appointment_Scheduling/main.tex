\documentclass{article}
\usepackage{graphicx} % Required for inserting images

\usepackage{setspace}

\usepackage{amsmath}
\usepackage{color}

\usepackage{indentfirst}
\setlength{\parindent}{2em}  % 用于首行缩进

\usepackage{geometry}
\geometry{a4paper,left=1in,right=1in,top =1in, bottom = 1in}
\setstretch{1.5}   %  改变行间距

\title{Appointment Scheduling with Restricted People}

% \author{Discount}

\date{}
\begin{document}

\maketitle

\section{Model}

The service time for patient $i$, $\xi_{i}$, stochastic with a mean of $\mu_{i}$ and a standard deviation of $\sigma_{i}$. The service times are mutually independent.
For each patient $i = 1, \ldots, n$, we use $A_{i}$ to denote the appointment time, $S_{i} = \max\{A_{i}, S_{i-1} + \xi_{i-1}\}$ denote the actual starting time of service. We assume that the patients will arrive at the appointed time. Especially, $A_{1} = S_{1} = 0$.

The waiting time for patient $i$ is $S_{i} - A_{i}$, the total waiting time is $\sum_{i=2}^n \alpha_i \left(S_i-A_i\right)$, where $\alpha_i$ is the weight for patient $i$. The overtime is $(S_{n} +\xi_{n} - T)^{+}$ and the total idle time is $\sum_{i=1}^{n-1}[S_{i+1} - (S_{i} + \xi_{i})] = S_{n} - \sum_{i=1}^{n-1} \xi_{i}$.


\textcolor{red}{In the scenario with at least 2 patients overlapping in the waiting room, we can calculate the overlapping time. Let $t_{ij}$ denote the overlapping time between two patients $i$ and $j$. Then, $t_{i,j} = (S_{i} - A_{j})^{+}$.}

The duration when there are only $(j-i+1)$ people for patients $i$ and $j$ are waiting is $t_{i,j} - t_{i,j+1}$, $i =2, \ldots, n-1, j \geq i$.



%  Patient $i$ will arrive at $A_{i}$ but start service at $S_{i}$.

\textcolor{red}{Total overlapping time: $\sum_{i=2}^{n-1} \sum_{j=i}^{n-1} \gamma_{i,j} (t_{i,j} - t_{i,j+1})$}

Problem to minimize the total time:

\begin{equation}
    \begin{aligned}
        \min_{\mathbf{A}} \quad & E_{\xi}\left[\left(S_n-\sum_{i=1}^{n-1} \xi_i\right)+ \sum_{i=2}^{n-1} \sum_{j=i}^{n-1} \gamma_{i,j} (t_{i,j} - t_{i,j+1}) + \beta(S_{n} +\xi_{n} - T)^{+} \right] \\
        \mbox{s.t.} \quad & S_{i} = \max\{A_{i}, S_{i-1} + \xi_{i-1}\} \\
        & S_{1} = 0
    \end{aligned}
\end{equation}

% Surgical Scheduling with Constrained Patient Waiting Times
% Appointment Scheduling Under a Service-Level Constraint


% direction: put the overlapping time in objective function or put it in the constraint.
% analyze three components seperately.

1. Possible traits: heterogeneous patients, no-show, lateness, walk-in

Different models: objective: minimize the total cost, minimize the makespan (the departure time of the last customer).

Two possible options: the time of several people waiting, what if it is not 

Traditional Appointment Scheduling Model.

1. with overbooking and no-shows (partial punctuality)

- discrete n time slots.

- minimize the waiting cost, idle time and overtime costs.


2. 

- minimize 


3. Under a service-level constraint (waiting time threshold)

- makespan


\end{document}
