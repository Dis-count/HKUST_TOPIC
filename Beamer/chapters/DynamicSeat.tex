% !TeX root = ./main.tex

\section{Dynamic Seat Assignment for Each Group Arrival}
    \frame{\sectionpage}
    \begin{frame}{Stochatic Planning Policy}
      Stochastic planning policy involves
      \begin{itemize}
        \item Group-type Control
        \item[-] Seat planning.
        \item[-] Small assigned to larger seats. $\rightarrow$ Find an arbitrary row to assign.
        \item Value of Acceptance and Rejection
        \item[-] Compare the value of stochastic programming when assigning in the row versus not assigning.
      \end{itemize}
    \end{frame}

    % \begin{Booking limit Control}

    % \end{Booking limit Control}

    % \begin{frame}{Algorithm Based on Stochastic Planning Policy}
    %     \begin{description}
    %       \item[Step 1.] Obtain the set of patterns, $\mathbf{P} = \{P_1,\ldots,P_{N}\}$, from the feasible seat planning algorithm. The corresponding aggregate supply is $\mathbf{X} = [x_{1}, \ldots, x_{M}]$.
    %       \item[Step 2.] For the arrival group type $i$ at period $T{'}$, 
    %       If $\exists k \in \mathcal{N}$ such that $i \in P_k$, accept the group, update $P_{k} = P_{k}/(i)$ and $x_{i} = x_{i} -1$. Go to step 4. Otherwise, go to step 3.
    %       \item[Step 3.] Calculate $d(i,j^{*})$. If $d(i,j^{*})>0$, find the first $k \in \mathcal{N}$ such that $j^{*} \in P_k$. If value of acceptance is larger than value of rejection, accept group type $i$ and update $P_{k} = P_{k}/(j^{*})$, $x_{j^{*}} = x_{j^{*}} -1$. Then update $x_{j^{*}-i-\delta} = x_{j^{*}-i-\delta} + 1$ and $P_{k}= P_{k} \cup (j^{*}-i-\delta)$ when $j^{*}-i-\delta > 0$. If $d(i,j^{*}) \leq 0$, reject group type $i$.
    %       \item[Step 4.] If $T{'} \leq T$, move to next period, set $T{'} = T{'}+1$, go to step 2. Otherwise, terminate this algorithm.
    %     \end{description}
    %   \end{frame}
      
      \begin{frame}{Bid-price Control}
        The dual problem of linear relaxation of problem \eqref{deter_upper} is:
        \begin{equation}\label{bid-price_dual}
          \begin{aligned}
          \min \quad & \sum_{i=1}^{M} d_i z_i + \sum_{j= 1}^{N} L_j \beta_{j} \\
          \text {s.t.} \quad & z_{i} + \beta_j n_i \geq (n_i-\delta), \quad i \in \mathcal{M}, j \in \mathcal{N} \\
          & z_{i} \geq 0, i \in \mathcal{M}, \beta_{j} \geq 0, j \in \mathcal{N}.
          \end{aligned}
        \end{equation}
        \small There exists $h$ such that the aggregate optimal solution to relaxation of problem \eqref{deter_upper} takes the form $x e_{h} + \sum_{i=h+1} ^{M} d_{i} e_{i}$, $x = (L- \sum_{i = h+1}^{M} {d_i n_i})/ n_h$.

        The bid-price control policy will make the decision to accept group type $i$, where $i$ is greater than or equal to $h$, if the capacity allows.
      \end{frame}

      \begin{frame}{Dynamic Programming Base-heuristic}
        Relax all rows to one row with the same capacity by $L = \sum_{j=1}^{N} L_j$.
        
        Deterministic problem is: $\{\max \sum_{i=1}^{M} (n_i- \delta) x_{i}: x_{i} \leq d_{i}, i \in \mathcal{M}, \sum_{i=1}^{M} n_{i} x_{i} \leq L, x_{i} \in \mathbb{Z}_{+}\}$.
        
        Let $u$ denote the decision, where $u(t) = 1$ if we accept a request in period $t$, $u(t) =0$ otherwise, the DP with one row can be expressed as:
        $$V_{t}(L) = \mathbb{E}_{i \sim p} [\max_{u \in \{0,1\}} \{ {[V_{t+1}(L-n_i u)+ i u]}\}], L \geq 0$$ 
        $$V_{T+1}(x) =0, \forall x.$$

        After accepting one group, assign it in some row arbitrarily when the capacity of the row allows.
      \end{frame}
      