% !TeX root = ./main.tex

\section{Dynamic Seat Assignment for Each Group Arrival}
    \frame{\sectionpage}
    \begin{frame}{Policies}
      \begin{itemize}
        \item Stochastic planning policy
        \item Bid-price control
        \item Dynamic programming based heuristic
        \item Booking limit control
        \item First come first served
      \end{itemize}
    \end{frame}

    \begin{frame}{Stochastic Planning Policy(SPP)}
      % Stochastic planning policy involves
      \begin{itemize}
        \item Group-type control
        \item[-] Feasible Seat planning from stochastic programming.
        \item[-] When there is no small group, decide which group type to be assigned.
        Let $d(i, j)$ be the difference of expected number of accepted people between acceptance and rejection on group $i$ occupying $(j + \delta)$-size seats.

        Find the largest $d(i, j)$, denoted as $d(i, j^{*})$. If $d(i, j^{*}) > 0$, we will place
the group of $i$ in $(j^{*} + \delta)$-size seats. Otherwise, reject the group.
      \end{itemize}
    \end{frame}

    \begin{frame}{Stochastic Planning Policy(SPP)}
      % Stochastic planning policy involves
      \begin{itemize}
        \item Value of Acceptance and Rejection
        \item[-] Compare the value of stochastic programming when assigning in the row versus not assigning.
        \item[] 
        Value of Acceptance: use the value of stochastic programming as the approximation of $V_{t} (\mathbf{L-n_i \mathbf{e}_j^{\top}})$ + $i$.
        
        Value of Rejection: approximation of $V_{t} (\mathbf{L})$.
      \end{itemize}
    \end{frame}

      \begin{frame}{Bid-price Control}
        The dual problem of linear relaxation of problem \eqref{deter_upper} is:
        \begin{equation}\label{bid-price_dual}
          \begin{aligned}
          \min \quad & \sum_{i=1}^{M} d_i z_i + \sum_{j= 1}^{N} L_j \beta_{j} \\
          \text {s.t.} \quad & z_{i} + \beta_j n_i \geq (n_i-\delta), \quad i \in \mathcal{M}, j \in \mathcal{N} \\
          & z_{i} \geq 0, i \in \mathcal{M}, \beta_{j} \geq 0, j \in \mathcal{N}.
          \end{aligned}
        \end{equation}
        \small There exists $h$ such that the aggregate optimal solution to relaxation of problem \eqref{deter_upper} takes the form $x e_{h} + \sum_{i=h+1} ^{M} d_{i} e_{i}$, $x = (L- \sum_{i = h+1}^{M} {d_i n_i})/ n_h$.

        % The bid-price control policy will make the decision to accept group type $i$, where $i$ is greater than or equal to $h$, if the capacity allows.
      \end{frame}

      \begin{frame}{Dynamic Programming Based Heuristic}
        Relax all rows to one row with the same capacity by $L = \sum_{j=1}^{N} L_j$.
        
        Deterministic problem is: $\{\max \sum_{i=1}^{M} (n_i- \delta) x_{i}: x_{i} \leq d_{i}, i \in \mathcal{M}, \sum_{i=1}^{M} n_{i} x_{i} \leq L, x_{i} \in \mathbb{Z}_{+}\}$.
        
        Let $u$ denote the decision, where $u(t) = 1$ if we accept a request in period $t$, $u(t) =0$ otherwise, the DP with one row can be expressed as:
        $$V_{t}(L) = \mathbb{E}_{i \sim p} [\max_{u \in \{0,1\}} \{ {[V_{t+1}(L-n_i u)+ i u]}\}], L \geq 0$$ 
        $$V_{T+1}(x) =0, \forall x.$$

        After accepting one group, assign it in some row arbitrarily when the capacity of the row allows.
      \end{frame}
      
      \begin{frame}{Booking limit Control}
        Solve problem \eqref{deter_upper} using the expected demand. Then for every type of requests, we only allocate a fixed amount according to the static solution and reject all other exceeding requests.
        \vspace*{1cm}
        
        When we solve the linear relaxation of problem \eqref{deter_upper}, the aggregate optimal solution is the limits for each group type. Interestingly, the bid-price control policy is found to be equivalent to the booking limit control policy.
      \end{frame}