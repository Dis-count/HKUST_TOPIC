% !TEX root = sum1.tex
\section{Problem Formulation}
In this section, we give the description of the problem, then present the deterministic and stochastic formalution.
% First, we will introduce some preliminary knowledge about our problem as follows.

\subsection{Problem Description}
% In this section we present the model that generates seat assignment under deterministic demands.

Consider a set of groups, each consisting of no more than $m$ people, to be assigned to a set of seats. These groups are denoted by a demand vector, $\mathbf{d} = (d_1, \ldots, d_m)$. Each element, $d_i, 1 \leq i \leq m$, indicates the number of $i$-th group type containing $i$ people. For illustration, we consider the layout as $N$ rows, each row with $S_{j}$ seats, $j = 1, \ldots, N$. Let $x_{ij}$ indicate the number of group type $i$ placed in row $j$. Then $\sum_{j=1}^{N} x_{ij}$ indicates the supply for $i$-th group type.

% Let the $i-$th group type contain $i$ people. 
% $(d_1, d_2, d_3, d_4) = (3,5,7,6)$

% But our model and formulation allow for a more general layout of the seats. 
According to the epidemic prevention requirements, the customers from the same group can sit together, while different groups should sit with social distancing. 
Suppose that each group has to leave one seat to maintain social distancing from the adjacent groups and different rows have no effect on each other, i.e., a person from one group can sit directly behind a person from another group.

% Considering the actual situation, social distancing is one seat in our paper 
To implement the social distancing in the seat assignment, we add one to the original size of each group as the new size of the group and one dummy seat to each row. Take $s_{i} = i + 1$, $L_{j} = S_{j} +1$, $s_{i}$ is the new size of group type $i$ and $L_{j}$ is the length of row $j$.

Then we can illustrate the seat assignment for one row below. 

\begin{figure}[ht]
    \centering
    \includegraphics[width = 0.8\textwidth]{./Figures/dummy_seat.pdf}
    \caption{Problem Conversion}
\end{figure}

On the left side, the blue squares stand for the empty seats as the social distancing. The orange squares represent the seats sat by the groups. 
On the right side, one dummy seat is added at the end of the row. The orange squares surrounded by the red line are the seats taken by groups.

In this way, the social distancing will be integrated by solving this new seat assignment problem.

% The number of all seats in each row is called the length of the row.

\subsection{Deterministic Model}
When the demand is known in advance, to accommodate as many as people possible in the fixed rows, the deterministic model can be shown below:

\begin{equation}\label{deter_upper}
    \begin{aligned}
      \max \quad & \sum_{j =1}^{N} \sum_{i = 1}^{m} (s_i -1) x_{ij} \\
      \text {s.t.} \quad & \sum_{i = 1}^{m} s_i x_{ij} \leq L_{j}, j=1,\ldots,N \\
      & \sum_{j =1}^{N} x_{ij} \leq d_{i}, i=1,\ldots,m \\
      & x_{ij} \geq 0, \text{integer}~ i=1,\ldots,m, j=1,\ldots,N.
    \end{aligned}
\end{equation}

This Integer Programming is a special case of the Multiple Knapsack Problem. The solution to the linear relaxation of Problem \eqref{deter_upper} can be obtained easily because the ratio of value to capacity, $\frac{s_i-1}{s_i}, 1 \leq i \leq m$, is monotone in group type. Its has the form $(0,\ldots, x,d_{k}, \ldots, d_{m})$ based on the principle of placing large groups whenever possible.
 


% when the capacity allows accepting the groups from large to small as many as possible will give an optimal solution.


% Why is it easy to solve this IP?

% If the ratio is the same for the groups, IP will use more branches to obtain an optimal solution.

% $[24,28,8,9]$ 10 rows.
% Total loss: 60; loss of the largest pattern: 5.


